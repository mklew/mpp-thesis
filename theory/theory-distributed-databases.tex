%!TEX root = ../thesis.tex

\section{Distributed databases}\label{sec:theory:distDbs}
We need to introduce concepts and techniques commonly used in the non-relational distributed databases, such as: data partitioning and replication.

The amounts of data to be processed grows much faster than the computational power of a single machine. Therefore, researchers and programmers started looking into distributed programming as an alternative way of solving problems which cannot fit a lone computer anymore. 

%, and also we need to be aware of the pitfalls of the distributed systems, which can be grouped into \begin{enumerate*} \item overcoming problems with distance, \item independent failures of the systems \end{enumerate*}.
%Key features of the distributed databases are replication

\subsection{Scalability}
Non distributed databases scale, as in Definition \ref{def:scalability}, vertically, or up, which means that a single machine is upgraded to be more powerful, whereas distributed databases scale horizontally, which means that another machine is added to the system in order to handle more requests. Distributed databases usually run on a commoditiy hardware, as opposed to dedicated servers.

\begin{definition}
  \label{def:scalability}
  \emph{Scalability} is the ability of a system, network, or process, to handle a growing amount of work in a capable manner or its ability to be enlarged to accommodate that growth \cite{DistributeSystemsForFunAndProfit}. 
\end{definition}


\subsection{Availability, fault tolerance and CAP theorem}
Availability \ref{def:availability} and fault tolerance \ref{def:fault-tolerance} are two crucial characteristics of any distributed database. The \emph{CAP} theorem \cite{brewer2000towards} \cite{Brewer:2012ba} says that during a network partition, which is a network failure, a database can be either \emph{C} -- consistent, or \emph{A} -- available. 

Distributed databases must handle network partition -- \emph{P} in \emph{CAP} -- otherwise the whole system goes down with a failure of a single node. Therefore the distinction between databases is whether they are \emph{AP}, thus drop consistency, or \emph{CP}, which preserves consistency, but sacrifices availability.

If the database remains consistent, then it cannot accept writes, which would break the consistency of data. Available database accepts writes during network partition, thus sacrifices consistency of data.

\begin{definition}
	\label{def:availability}
	\emph{Availability} is the proportion of time a system is in a functioning condition. If a user cannot access the system, it is said to be unavailable \cite{DistributeSystemsForFunAndProfit}.	
\end{definition}


\begin{definition}
\label{def:fault-tolerance}
\emph{Fault tolerance} is the ability of a system to behave in a well-defined manner once faults occur. 
\end{definition}

\subsection{Partitioning}
Partitioning is a technique of distributing data between servers. 
It divides the whole dataset into independent subsets and assigns these subsets to nodes. 
Moreover, partitioning provides efficient look up of data, because it knows the assignment. In order to perform any operation, the partition needs to be located first. 

Partitioning increases data processing capabilities and total capacity of a database, since different nodes are responsible for different chunks of data. 

\subsection{Replication}
Replication is another technique, commonly used with partitioning to copy data to one or more different nodes in order to increase fault tolerance. If data are available only on a single node, then SPOF exists, but if data are available on two nodes or more, then data are accessible even if a node fails. 

Replication provides means of achieving scalability, performance, and fault tolerance, but it also is the root of the problems with the consistency, since data are present on different nodes, then any consistent modification requires communication with different nodes, and that communication, as well as the nodes, might be unreliable, and might fail. 

\begin{definition}
  \label{def:replicationFactor}
  \emph{Replication factor} \emph{RF} is the number of data copies stored in the cluster on different nodes.
\end{definition}

%A replication factor of $3$ means that three copies of the data exist across the cluster on $3$ different nodes.

