wyciete-z-chapter3.tex

% WyciÄ™te fragmenty z TransactionState
Transaction id identifies the transaction and is attached to all subsequent requests. 

Transaction \transaction is identified using \emph{unique id} (UUID\footnote{universal unique identifier}), which is generated by \node{i} upon request to begin transaction. 

There are many concurrent transactions, therefore transaction state should use least amount of memory possible, therefore tokens are used instead of keys. Existence of a \txItem means that replicas identified by the \emph{token} store modification of the key done in \transaction. Keys are unknown to the transaction state, but keys are known to the replicas. Each replica has full information about the key and operations performed on the value associated with it. 

Transaction item includes also a table name in order to distinguish modifications associated with the same token, but in different tables. This can be extended to any other name spacing.
Token alone only directs us to nodes with modified data, but to know what has been modified, we also need names of tables. 

Transaction state has deterministic memory footprint, since it stores fixed-length tokens instead of keys with unknown size. 

\begin{definition}
  \label{def:transactionItem}
  \emph{Transaction item}, denoted as $ti$, is a pair of a token and a table name $(tk,table)$.
\end{definition}

\begin{definition}
  \label{def:transactionState}
  \emph{Transaction state}, denoted as $TS$, is a pair of a unique transaction id and set of transaction items $(id, \{ \text{\txItemi{a}, ..., \txItemi{k}} \})$.
\end{definition}